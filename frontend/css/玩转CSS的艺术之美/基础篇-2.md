# 盒模型

# 样式计算

## 前言
编写样式时肯定会遇到以下几个情况
+ 样式覆盖导致排版错位甚至乱套
+ 布局时不知使用什么长度单位声明属性
+ 引入第三方 `UI` 框架导致自定义样式失效
+ 同一节点同时出现多种类型样式时不知道如何优雅解决

## 优先级别
在编写 `CSS`  时，使用不同选择器选中相同节点且为相同样式声明不同值，就会发生样式覆盖。发生样式覆盖时，应用哪个样式就由选择器的优先级别决定，因此样式覆盖的根本原因是**未处理好规则间的优先级别**

优先级别具有以下特性:
+ 就近原则 : 后出现的样式其优先级别比先出现的样式更高
+ 继承样式 : 优先级别最低
+ `!important` 样式 : 优先级别最高，若冲突则重新计算
+ 引入权重 : 内联样式 > 内嵌样式 > 外部样式 > 导入样式



`CSS` 有以下引入方式:
+ `内联样式` : 在 `HTML` 标签使用 `style` 声明样式，是最简单粗暴的样式声明方式，通常不推荐这样声明样式，它会导致 `HTML` 结构变得不纯净且体积变大，不利于 `SEO` ，也不利于后期维护
  ```html
  <p style="color: #f66;">
    I am yongjin
  </p>
  ```
+ `内嵌样式` : 在 `<head>` 中使用 `<style>` 声明样式，通常在开发环境中使用，像 `webpack` 使用 `style-loader` 时就是将代码中的样式全部提取出来，以内嵌样式声明网页样式。如果多个网页使用公共样式就要重复声明，网页数量越多就越难维护，当然网页样式较少的情况还是使用该方式最好
  ```html
  <head>
    <style>
      p {
        color: #f66;
      }
    </style>
  </head>
  ```
+ `外部样式` : 在 `<head>` 中使用 `<link>` 引入样式，是最方便快捷的样式声明方式，通常在生产环境中使用，这样方便将 `HTML` 和 `CSS` 代码完全分离，为 `HTML` 语义化和结构与表现完全分离提供技术上的支持。这样的处理不仅利于开发和维护，同时也是团队协作的最优 `CSS` 代码组织方式
  ```html
  <head>
    <link rel="stylesheet" href="path/to/main.css">
  </head>
  ```
+ `导入样式` : 在 `CSS`  类型文件中通过 `@import` 导入其他样式。导入样式其实与外部样式类似，在 `HTML` 初始化时，会被导入到文件中成为文件的一部分。对于多个网页的公有样式可将它们抽离出来，再通过 `@import` 导入样式到这些网页的 `CSS` 文件中
  ```html
  <head>
    <style>
      @import url("path/to/common.css");
    </style>
  </head>
  ```
  ```css
  @import url("path/to/common.css");
  ```

::: tip 就近原则
+ 内联样式直接作用在节点中，因此优先级别最高
+ 内嵌样式附属于 `HTML`  文件的解析而解析，因此优先级别跟着内联样式
+ 外部样式需要加载完毕才能解析，因此优先级别跟着内嵌样式
+ 导入样式作用于内联样式或外部样式中，因此优先级别跟着外部样式
:::

## 权重
选择器有着明显不可逾越的等级制度，可将其划分为六个权重等级。每个等级间的优先级别差距不可逾越，这些等级称为权重。数字组成的值越大其权重越大

使用公式可表达为以下形式:

`!important` > 内联样式 > ID 选择器 > 类选择器 = 伪类选择器 = 属性选择器 > 标签选择器 = 伪元素选择器 > 通配选择器 = 兄弟选择器 = 后代选择器

::: tip 直观权重和微观权重
| 直观权重 | 类选择器 |
| -- | -- |
| 10000 | `!important` |
| 1000 | 内联样式 |
| 100 | ID 选择器 |
| 10 | 类选择器 / 伪类选择器 / 属性选择器 |
| 1 | 标签选择器 / 伪元素选择器 |
| 0 | 通配选择器 / 兄弟选择器 / 后代选择器 |


| 微观权重 | 类选择器 |
| -- | -- |
| 1,0,0,0,0 | `!important` |
| 0,1,0,0,0 | 内联样式 |
| 0,0,1,0,0 | ID 选择器 |
| 0,0,0,1,0 | 类选择器 / 伪类选择器 / 属性选择器 |
| 0,0,0,0,1 | 标签选择器 / 伪元素选择器 |
| 0,0,0,0,0 | 通配选择器 / 兄弟选择器 / 后代选择器 |
:::


## 计算规则

`CSS` 计算规则:
+ 规则的权值不同时，权值高的规则优先
+ 规则的权值相同时，后定义的规则优先
+ 属性后面追加 `!important` 时，规则无条件绝对优先
+ `:not()` 在优先级别计算中不会被看作伪类，但是会把 `:not()`中的选择器当作普通选择器计数，总之就是忽略 `:not()`，其他伪类照常参与优先级别计算

## 长度单位

| 单位 | 定义 | 类型 | 描述 |
| -- | -- | -- | -- |
| px | 像素 | 绝对单位 | -- |
| pt | 点 | 绝对单位 | 1pt = 1/72in |
| pc | 派 | 绝对单位 | 1pc = 12pt |
| mm | 毫米 | 绝对单位 | -- |
| cm | 厘米 | 绝对单位 | -- |
| in | 英寸 | 绝对单位 | 1in = 96px = 2.54cm |
| % | 百分比 | 相对单位 | 相对父节点尺寸，宽度相应，高度不一定相应 |
| em | M 的高度 | 相对单位 | 相对当前节点的字体 |
| rem | M 的高度 | 相对单位 | 相对根节点的字体 |

### 屏幕分辨率
屏幕分辨率指横纵向中的像素点数，单位是 `px`。屏幕分辨率确定计算机屏幕中能显示多少信息